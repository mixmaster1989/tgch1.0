# 🤖 Система автоматических покупок BTC/ETH

## 🎯 Описание

Система автоматически отслеживает освободившийся баланс USDT и покупает Bitcoin и Ethereum в заданных пропорциях. Это позволяет постоянно накапливать криптовалюты без необходимости вручную отслеживать баланс.

## ✅ Что создано

### **1. Монитор баланса** (`balance_monitor.py`)
- 🔄 Отслеживание изменений USDT баланса
- 💰 Определение освободившихся средств
- ⚡ Автоматические триггеры покупки
- 📊 Расчет распределения BTC/ETH

### **2. Конфигурация** (`auto_purchase_config.py`)
- ⚙️ Настройки мониторинга баланса
- 📈 Стратегия распределения средств
- 🔒 Настройки безопасности
- 📱 Настройки уведомлений

### **3. Запуск системы** (`run_auto_purchase.py`)
- 🚀 Главный скрипт запуска
- 🧪 Тестирование конфигурации
- 📋 Справка по использованию

### **4. Тестирование** (`test_auto_purchase.py`)
- 🧪 Полное тестирование системы
- 📊 Симуляция покупок
- ✅ Проверка всех компонентов

## 🚀 Как использовать

### **1. Настройка конфигурации**
Отредактируйте `auto_purchase_config.py`:

```python
# Минимальный баланс для покупки
'min_balance_threshold': 10.0,  # $10

# Максимальная сумма одной покупки
'max_purchase_amount': 100.0,   # $100

# Распределение между BTC и ETH
'btc_allocation': 0.6,    # 60% на BTC
'eth_allocation': 0.4,    # 40% на ETH

# Интервал проверки баланса
'balance_check_interval': 60,   # 1 минута
```

### **2. Тестирование системы**
```bash
python3 test_auto_purchase.py
```

### **3. Запуск автоматических покупок**
```bash
python3 run_auto_purchase.py start
```

### **4. Проверка конфигурации**
```bash
python3 run_auto_purchase.py test
```

## 📊 Как это работает

### **Мониторинг баланса:**
1. 🔄 Каждую минуту проверяется баланс USDT
2. 💰 Если баланс ≥ $10, запускается покупка
3. ⏰ Минимум 5 минут между покупками
4. 💸 Максимум $100 за одну покупку

### **Распределение средств:**
- 🟡 **Bitcoin (BTC)**: 60% от доступных средств
- 🔵 **Ethereum (ETH)**: 40% от доступных средств
- 💵 Минимум $5 на каждую монету

### **Пример покупки:**
```
Доступно USDT: $50
├── BTC: $30 (60%) → ~0.00026 BTC
└── ETH: $20 (40%) → ~0.0054 ETH
```

## 📱 Уведомления в Telegram

### **При запуске:**
```
🤖 МОНИТОР БАЛАНСА ЗАПУЩЕН

📊 Настройки:
💰 Минимальный баланс: $10
💸 Максимальная покупка: $100
⏰ Проверка каждые 60 сек
📈 BTC: 60% | ETH: 40%

🔄 Мониторинг активен...
```

### **При покупке:**
```
🛒 АВТОМАТИЧЕСКАЯ ПОКУПКА ВЫПОЛНЕНА
==================================================

📅 Время: 15.01.2025 15:30:45
💰 Доступно USDT: $50.00
💸 Потрачено: $50.00

📋 КУПЛЕННЫЕ АКТИВЫ:
✅ BTCUSDT:
   💰 Количество: 0.000260
   💵 Сумма: $30.00
   📈 Цена: $115000.00
   🆔 Ордер: 12345678

✅ ETHUSDT:
   💰 Количество: 0.005400
   💵 Сумма: $20.00
   📈 Цена: $3700.00
   🆔 Ордер: 12345679

📊 СТАТИСТИКА:
🎯 Всего покупок: 5
💵 Общая сумма: $250.00
⏰ Следующая покупка через: 5 мин

==================================================
🤖 MEXCAITRADE - АВТОМАТИЧЕСКАЯ ТОРГОВЛЯ
```

## 🔒 Безопасность

### **Защитные механизмы:**
- 💰 Минимальный баланс $10 для покупки
- ⏰ Минимум 5 минут между покупками
- 💸 Максимум $100 за одну покупку
- 📊 Максимум $500 в день
- 🔄 Резервный баланс $20 (не тратится)

### **Обработка ошибок:**
- ❌ Повторные попытки при ошибках API
- 📱 Уведомления об ошибках в Telegram
- 🔄 Автоматическое восстановление
- 📝 Подробное логирование

## ⚙️ Настройки

### **Основные параметры:**
```python
# В auto_purchase_config.py

BALANCE_MONITOR_CONFIG = {
    'min_balance_threshold': 10.0,    # Минимальный баланс
    'max_purchase_amount': 100.0,     # Максимальная покупка
    'balance_check_interval': 60,     # Интервал проверки (сек)
    'min_purchase_interval': 300,     # Интервал между покупками (сек)
}

ALLOCATION_STRATEGY = {
    'btc_allocation': 0.6,            # 60% на BTC
    'eth_allocation': 0.4,            # 40% на ETH
    'min_amount_per_coin': 5.0,       # Минимум на монету
}

SAFETY_CONFIG = {
    'max_daily_spend': 500.0,         # Максимум в день
    'reserve_balance': 20.0,          # Резервный баланс
}
```

## 📋 Файлы системы

```
MEXCAITRADE/
├── balance_monitor.py          # Монитор баланса
├── auto_purchase_config.py     # Конфигурация
├── run_auto_purchase.py        # Запуск системы
├── test_auto_purchase.py       # Тестирование
└── АВТОПОКУПКИ_README.md       # Документация
```

## 🚨 Важные замечания

### **Перед запуском:**
1. ✅ Проверьте API ключи MEXC
2. ✅ Настройте Telegram бота
3. ✅ Протестируйте систему
4. ✅ Проверьте баланс USDT

### **Рекомендации:**
- 🧪 Сначала запустите тесты
- 💰 Начните с малых сумм
- 📊 Мониторьте логи
- 🔒 Не превышайте лимиты

### **Ограничения:**
- 💸 Только рыночные ордера
- ⏰ Минимум 5 минут между покупками
- 💰 Максимум $100 за покупку
- 📊 Только BTC и ETH

## 🎯 Готово к использованию!

Система полностью настроена и готова к работе. Запускайте и автоматически накапливайте BTC/ETH! 🚀 