# üîç –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ `comprehensive_data_manager.py` —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –∞–∫–∫–∞—É–Ω—Ç –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —Ç–µ–º–∏ –º–æ–Ω–µ—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –∫—É–ø–ª–µ–Ω—ã –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç–µ.

## üöÄ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∏—Å—Ç–µ–º—ã –≤ –º–µ—Ç–æ–¥–µ `start()`:
```python
# üîç –ö–†–ò–¢–ò–ß–ù–û: –ü–æ–ª—É—á–∞–µ–º —Å–∏–º–≤–æ–ª—ã –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ –Ω–∏—Ö
account_symbols = self._get_account_symbols()
print(f"üìä –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ {len(account_symbols)} —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞: {', '.join(account_symbols)}")
await self.subscribe_multiple_symbols(account_symbols)
```

### 2. –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π
–í –º–µ—Ç–æ–¥–µ `_account_data_loop()` —Å–∏—Å—Ç–µ–º–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞–∫–∫–∞—É–Ω—Ç–µ:
```python
# üîç –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–∏–º–≤–æ–ª–∞—Ö –∞–∫–∫–∞—É–Ω—Ç–∞
current_symbols = self._get_account_symbols()
if set(current_symbols) != self._last_account_symbols:
    print(f"üîÑ –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞–∫–∫–∞—É–Ω—Ç–µ!")
    # –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –Ω–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã
    await self.subscribe_multiple_symbols(current_symbols)
```

### 3. –£–º–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤
–ú–µ—Ç–æ–¥ `_get_account_symbols()` —Å–∫–∞–Ω–∏—Ä—É–µ—Ç:
- **–°–ø–æ—Ç –±–∞–ª–∞–Ω—Å—ã** - –≤—Å–µ –∞–∫—Ç–∏–≤—ã —Å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º –±–∞–ª–∞–Ω—Å–æ–º (–∏—Å–∫–ª—é—á–∞—è USDT/USDC)
- **–§—å—é—á–µ—Ä—Å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏** - –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- **–û—Ç–∫—Ä—ã—Ç—ã–µ –æ—Ä–¥–µ—Ä–∞** - –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞

## üìä –ß—Ç–æ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç—Å—è

### –°–ø–æ—Ç —Ç–æ—Ä–≥–æ–≤–ª—è
- –ë–∞–ª–∞–Ω—Å—ã –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–æ–≤ (BTC, ETH, ADA, SOL –∏ —Ç.–¥.)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ —Å–∏–º–≤–æ–ª—ã —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä (BTCUSDT, ETHUSDT)

### –§—å—é—á–µ—Ä—Å—ã
- –í—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- –ü–æ–∑–∏—Ü–∏–∏ —Å –Ω–µ–Ω—É–ª–µ–≤—ã–º —Ä–∞–∑–º–µ—Ä–æ–º

### –û—Ä–¥–µ—Ä–∞
- –í—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –æ—Ä–¥–µ—Ä–∞
- –ü–æ–∫—É–ø–∫–∏ –∏ –ø—Ä–æ–¥–∞–∂–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ
1. –°–∫–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∞–∫–∫–∞—É–Ω—Ç
2. –û–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è WebSocket –ø–æ–¥–ø–∏—Å–∫–∏
4. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ

### –í–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
1. –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∞–∫–∫–∞—É–Ω—Ç
2. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ–¥–ø–∏—Å–∫–∏
3. –ù–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è, —É–¥–∞–ª–µ–Ω–Ω—ã–µ - —É–±–∏—Ä–∞—é—Ç—Å—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:
```bash
python test_account_scanning.py
```

–í—ã–±–µ—Ä–∏—Ç–µ:
- **–¢–µ—Å—Ç 1**: –ë–∞–∑–æ–≤–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞
- **–¢–µ—Å—Ç 2**: –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —É–∫–∞–∑—ã–≤–∞—Ç—å —Å–∏–º–≤–æ–ª—ã
2. **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å** - –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ–º —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏
3. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –Ω–µ —Ç—Ä–∞—Ç–∏–º —Ä–µ—Å—É—Ä—Å—ã –Ω–∞ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –≤–∏–¥–∏–º –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ—Ä—Ç—Ñ–µ–ª–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üîß –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
```python
await data_manager.refresh_account_subscriptions()
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
```python
symbols = data_manager._get_account_symbols()
```

### –°–≤–æ–¥–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è
```python
portfolio = data_manager.get_portfolio_summary()
```

## ‚ö†Ô∏è Fallback

–ï—Å–ª–∏ –Ω–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç–∞, —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∑–æ–≤—ã–π —Å–ø–∏—Å–æ–∫:
```python
['BTCUSDT', 'ETHUSDT', 'ADAUSDT', 'SOLUSDT', 'DOTUSDT', 'BNBUSDT']
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –∞–∫–∫–∞—É–Ω—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –∫—É–ø–ª–µ–Ω–Ω—ã–º–∏ –º–æ–Ω–µ—Ç–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–¥–∫—É –ø–æ—Ä—Ç—Ñ–µ–ª—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ—Å—É—Ä—Å—ã 