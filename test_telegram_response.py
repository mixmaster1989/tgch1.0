#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞ –≤ Telegram
"""

import asyncio
from active_50_50_balancer import Active5050Balancer

async def test_telegram_response():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É –æ—Ç–≤–µ—Ç–∞ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞ –≤ Telegram"""
    print("üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –û–¢–ü–†–ê–í–ö–ò –û–¢–í–ï–¢–ê –ë–ê–õ–ê–ù–°–ò–†–û–í–©–ò–ö–ê –í TELEGRAM")
    print("=" * 60)
    
    balancer = Active5050Balancer()
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å—Ü–µ–Ω–∞—Ä–∏–π —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ–∫—É–ø–∫–∏
    print("\n1Ô∏è‚É£ –¢–ï–°–¢–ò–†–£–ï–ú –†–ê–ó–†–ï–®–ï–ù–ò–ï –ü–û–ö–£–ü–ö–ò:")
    print("   (–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏)")
    
    # –°–∏–º—É–ª–∏—Ä—É–µ–º —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å
    def mock_portfolio_balanced():
        return {
            'alts_value': 500.0,      # 50% –æ—Ç –ø–æ—Ä—Ç—Ñ–µ–ª—è
            'btceth_value': 500.0,    # 50% –æ—Ç –ø–æ—Ä—Ç—Ñ–µ–ª—è
            'btceth_value_usdt': 500.0,
            'total_value': 1000.0,
            'usdc_usdt_rate': 1.0
        }
    
    balancer.get_portfolio_values = mock_portfolio_balanced
    
    permission = balancer.check_purchase_permission(50.0, "ALTS")
    
    print(f"   üìä –ê–ª—å—Ç—ã: 50.0% (—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–æ)")
    print(f"   üìä BTC/ETH: 50.0%")
    print(f"   ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–æ: {permission['allowed']}")
    print(f"   üìù –ü—Ä–∏—á–∏–Ω–∞: {permission['reason']}")
    print("   ÔøΩÔøΩ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram")
    
    # –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å—Ü–µ–Ω–∞—Ä–∏–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–∫—É–ø–∫–∏
    print("\n2Ô∏è‚É£ –¢–ï–°–¢–ò–†–£–ï–ú –ë–õ–û–ö–ò–†–û–í–ö–£ –ü–û–ö–£–ü–ö–ò:")
    print("   (–ü–µ—Ä–µ–≤–µ—Å –∞–ª—å—Ç–æ–≤)")
    
    # –°–∏–º—É–ª–∏—Ä—É–µ–º –ø–µ—Ä–µ–≤–µ—Å –∞–ª—å—Ç–æ–≤
    def mock_portfolio_alts_overweight():
        return {
            'alts_value': 600.0,      # 60% –æ—Ç –ø–æ—Ä—Ç—Ñ–µ–ª—è
            'btceth_value': 400.0,    # 40% –æ—Ç –ø–æ—Ä—Ç—Ñ–µ–ª—è
            'btceth_value_usdt': 400.0,
            'total_value': 1000.0,
            'usdc_usdt_rate': 1.0
        }
    
    balancer.get_portfolio_values = mock_portfolio_alts_overweight
    
    permission = balancer.check_purchase_permission(50.0, "ALTS")
    
    print(f"   üìä –ê–ª—å—Ç—ã: 60.0% (–ø–µ—Ä–µ–≤–µ—Å!)")
    print(f"   üìä BTC/ETH: 40.0%")
    print(f"   üö´ –†–∞–∑—Ä–µ—à–µ–Ω–æ: {permission['allowed']}")
    print(f"   üìù –ü—Ä–∏—á–∏–Ω–∞: {permission['reason']}")
    print("   üì± –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram")
    
    print("\n" + "=" * 60)
    print("‚úÖ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û!")
    print("\nüìã –ü–†–û–í–ï–†–¨–¢–ï TELEGRAM:")
    print("   ‚Ä¢ –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ 2 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞")
    print("   ‚Ä¢ –ü–µ—Ä–≤–æ–µ: —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏ (—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏)")
    print("   ‚Ä¢ –í—Ç–æ—Ä–æ–µ: –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–∫—É–ø–∫–∏ (–ø–µ—Ä–µ–≤–µ—Å –∞–ª—å—Ç–æ–≤)")
    print("   ‚Ä¢ –í –∫–∞–∂–¥–æ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–µ–∫—É—â–∏–µ –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è")

if __name__ == "__main__":
    asyncio.run(test_telegram_response())
